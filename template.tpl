___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Facebook Offline Conversion",
  "brand": {
    "id": "brand_dummy",
    "displayName": "Stape",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Tag that send the event data from the Universal Analytics/GA4/Data client to Facebook Offline Conversion.",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "RADIO",
    "name": "eventType",
    "displayName": "Event Name Setup Method",
    "radioItems": [
      {
        "value": "standard",
        "displayValue": "Standard",
        "subParams": [
          {
            "type": "SELECT",
            "name": "eventNameStandard",
            "selectItems": [
              {
                "value": "PageView",
                "displayValue": "PageView"
              },
              {
                "value": "AddPaymentInfo",
                "displayValue": "AddPaymentInfo"
              },
              {
                "value": "AddToCart",
                "displayValue": "AddToCart"
              },
              {
                "value": "AddToWishlist",
                "displayValue": "AddToWishlist"
              },
              {
                "value": "CompleteRegistration",
                "displayValue": "CompleteRegistration"
              },
              {
                "value": "Contact",
                "displayValue": "Contact"
              },
              {
                "value": "CustomizeProduct",
                "displayValue": "CustomizeProduct"
              },
              {
                "value": "Donate",
                "displayValue": "Donate"
              },
              {
                "value": "FindLocation",
                "displayValue": "FindLocation"
              },
              {
                "value": "InitiateCheckout",
                "displayValue": "InitiateCheckout"
              },
              {
                "value": "Lead",
                "displayValue": "Lead"
              },
              {
                "value": "Purchase",
                "displayValue": "Purchase"
              },
              {
                "value": "Schedule",
                "displayValue": "Schedule"
              },
              {
                "value": "Search",
                "displayValue": "Search"
              },
              {
                "value": "StartTrial",
                "displayValue": "StartTrial"
              },
              {
                "value": "SubmitApplication",
                "displayValue": "SubmitApplication"
              },
              {
                "value": "Subscribe",
                "displayValue": "Subscribe"
              },
              {
                "value": "ViewContent",
                "displayValue": "ViewContent"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "Purchase",
            "displayName": "Event Name",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "alwaysInSummary": true
          }
        ]
      },
      {
        "value": "inherit",
        "subParams": [],
        "displayValue": "Inherit from client"
      },
      {
        "value": "custom",
        "subParams": [
          {
            "type": "TEXT",
            "name": "eventNameCustom",
            "displayName": "",
            "simpleValueType": true
          }
        ],
        "displayValue": "Custom"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "standard"
  },
  {
    "type": "TEXT",
    "name": "accessToken",
    "displayName": "API Access Token",
    "simpleValueType": true,
    "help": "Set to your Facebook API Access Token. See \u003ca href\u003d\"https://developers.facebook.com/docs/marketing-api/offline-conversions/#requirements\" target\u003d\"_blank\"\u003ehere\u003c/a\u003e for more information.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "offlineEventSetId",
    "displayName": "Offline Event Set ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "uploadTag",
    "displayName": "Upload Tag",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Track your event uploads."
  },
  {
    "type": "TEXT",
    "name": "namespaceId",
    "displayName": "Namespace id",
    "simpleValueType": true,
    "help": "Scope used to resolve extern_id or tpid. Can be another data set or data partner ID."
  },
  {
    "displayName": "Server Event Data Override",
    "name": "serverEventDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "serverEventDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "event_time",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT",
            "selectItems": [
              {
                "value": "event_time",
                "displayValue": "Event Time"
              },
              {
                "value": "currency",
                "displayValue": "Currency"
              },
              {
                "value": "value",
                "displayValue": "Value"
              },
              {
                "value": "content_type",
                "displayValue": "Content Type"
              },
              {
                "value": "contents",
                "displayValue": "Contents"
              },
              {
                "value": "order_id",
                "displayValue": "Order id"
              },
              {
                "value": "item_number",
                "displayValue": "Item number"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ],
    "help": "See \u003ca href\u003d\"https://developers.facebook.com/docs/marketing-api/offline-conversions/#upload-events\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what parameters you can override."
  },
  {
    "displayName": "User Data",
    "name": "userDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "userDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "email",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT",
            "selectItems": [
              {
                "value": "email",
                "displayValue": "Email"
              },
              {
                "value": "phone",
                "displayValue": "Phone"
              },
              {
                "value": "gen",
                "displayValue": "Gender"
              },
              {
                "value": "doby",
                "displayValue": "Date of Birth. YYYY format"
              },
              {
                "value": "dobm",
                "displayValue": "Date of Birth. MM format"
              },
              {
                "value": "dobd",
                "displayValue": "Date of Birth. DD format"
              },
              {
                "value": "ln",
                "displayValue": "Last Name"
              },
              {
                "value": "fn",
                "displayValue": "First Name"
              },
              {
                "value": "fi",
                "displayValue": "First Name Initial"
              },
              {
                "value": "ct",
                "displayValue": "City"
              },
              {
                "value": "st",
                "displayValue": "State"
              },
              {
                "value": "zip",
                "displayValue": "Zip"
              },
              {
                "value": "country",
                "displayValue": "Country"
              },
              {
                "value": "madid",
                "displayValue": "Apple/Android Advertising Identifier"
              },
              {
                "value": "external_id",
                "displayValue": "External ID"
              },
              {
                "value": "lead_id",
                "displayValue": "Lead ID"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ],
    "help": "See \u003ca href\u003d\"https://developers.facebook.com/docs/marketing-api/offline-conversions/#upload-events\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what user data parameters you can add to the call. If the documentation requires the parameter to be hashed, you \u003cstrong\u003emust\u003c/strong\u003e hash it with SHA256, or the tag will do this automatically before sending the event to Facebook."
  },
  {
    "displayName": "Custom Data",
    "name": "customDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "customDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ],
    "help": "See \u003ca href\u003d\"https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/custom-data\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what data parameters you can add to the call."
  },
  {
    "displayName": "Logs Settings",
    "name": "logsGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "type": "RADIO",
        "name": "logType",
        "radioItems": [
          {
            "value": "no",
            "displayValue": "Do not log"
          },
          {
            "value": "debug",
            "displayValue": "Log to console during debug and preview"
          },
          {
            "value": "always",
            "displayValue": "Always log to console"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "debug"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

const encodeUriComponent = require('encodeUriComponent');
const getAllEventData = require('getAllEventData');
const JSON = require('JSON');
const Math = require('Math');
const sendHttpRequest = require('sendHttpRequest');
const getTimestampMillis = require('getTimestampMillis');
const getContainerVersion = require('getContainerVersion');
const logToConsole = require('logToConsole');
const sha256Sync = require('sha256Sync');
const getRequestHeader = require('getRequestHeader');
const getType = require('getType');
const makeString = require('makeString');

const isLoggingEnabled = determinateIsLoggingEnabled();
const traceId = isLoggingEnabled ? getRequestHeader('trace-id') : undefined;

const eventData = getAllEventData();

const apiVersion = '14.0';
const postUrl = 'https://graph.facebook.com/v' + apiVersion + '/' + enc(data.offlineEventSetId) + '/events?access_token=' + enc(data.accessToken);
const mappedEventData = mapEvent(eventData, data);
const postBody = {data: [mappedEventData], upload_tag: data.uploadTag};

if (isLoggingEnabled) {
    logToConsole(JSON.stringify({
        'Name': 'Facebook Offline Conversion',
        'Type': 'Request',
        'TraceId': traceId,
        'EventName': mappedEventData.event_name,
        'RequestMethod': 'POST',
        'RequestUrl': postUrl,
        'RequestBody': postBody,
    }));
}

sendHttpRequest(postUrl, (statusCode, headers, body) => {
    if (isLoggingEnabled) {
        logToConsole(JSON.stringify({
            'Name': 'Facebook Offline Conversion',
            'Type': 'Response',
            'TraceId': traceId,
            'EventName': mappedEventData.event_name,
            'ResponseStatusCode': statusCode,
            'ResponseHeaders': headers,
            'ResponseBody': body,
        }));
    }

    if (statusCode >= 200 && statusCode < 300) {
        data.gtmOnSuccess();
    } else {
        data.gtmOnFailure();
    }
}, {headers: {'content-type': 'application/json'}, method: 'POST'}, JSON.stringify(postBody));


function getEventName(data) {
    if (data.eventType === 'inherit') {
        let eventName = eventData.event_name;

        let gaToFacebookEventName = {
            'page_view': 'PageView',
            "gtm.dom": "PageView",
            'add_payment_info': 'AddPaymentInfo',
            'add_to_cart': 'AddToCart',
            'add_to_wishlist': 'AddToWishlist',
            'sign_up': 'CompleteRegistration',
            'begin_checkout': 'InitiateCheckout',
            'generate_lead': 'Lead',
            'purchase': 'Purchase',
            'search': 'Search',
            'view_item': 'ViewContent',

            'contact': 'Contact',
            'customize_product': 'CustomizeProduct',
            'donate': 'Donate',
            'find_location': 'FindLocation',
            'schedule': 'Schedule',
            'start_trial': 'StartTrial',
            'submit_application': 'SubmitApplication',
            'subscribe': 'Subscribe',

            'gtm4wp.addProductToCartEEC': 'AddToCart',
            'gtm4wp.productClickEEC': 'ViewContent',
            'gtm4wp.checkoutOptionEEC': 'InitiateCheckout',
            'gtm4wp.checkoutStepEEC': 'AddPaymentInfo',
            'gtm4wp.orderCompletedEEC': 'Purchase'
        };

        if (!gaToFacebookEventName[eventName]) {
            return eventName;
        }

        return gaToFacebookEventName[eventName];
    }

    return data.eventType === 'standard' ? data.eventNameStandard : data.eventNameCustom;
}

function mapEvent(eventData, data) {
    let eventName = getEventName(data);

    let mappedData = {
        event_name: eventName,
        event_time: Math.round(getTimestampMillis() / 1000),
        custom_data: {},
        match_keys: {}
    };

    mappedData = addUserData(eventData, mappedData);
    mappedData = addEcommerceData(eventData, mappedData);
    mappedData = overrideDataIfNeeded(data, mappedData);
    mappedData = cleanupData(mappedData);
    mappedData = hashDataIfNeeded(mappedData);

    return mappedData;
}

function enc(data) {
    data = data || '';
    return encodeUriComponent(data);
}

function isHashed(value) {
    if (!value) {
        return false;
    }

    return makeString(value).match('^[A-Fa-f0-9]{64}$') !== null;
}

function hashData(key, value) {
    if (!value) {
        return value;
    }

    const type = getType(value);

    if (type === 'undefined' || value === 'undefined') {
        return undefined;
    }

    if (type === 'object') {
        return value.map(val => {
            return hashData(key, val);
        });
    }

    if (isHashed(value)) {
        return value;
    }

    value = makeString(value).trim().toLowerCase();

    if (key === 'phone') {
        value = value.split(' ').join('').split('-').join('').split('(').join('').split(')').join('').split('+').join('');
    } else if (key === 'ct') {
        value = value.split(' ').join('');
    }

    return sha256Sync(value, {outputEncoding: 'hex'});
}

function hashDataIfNeeded(mappedData) {
    if (mappedData.match_keys) {
        for (let key in mappedData.match_keys) {
            if (key === 'email' || key === 'phone' || key === 'gen' || key === 'doby' || key === 'dobm' || key === 'dobd' || key === 'ln' || key === 'fn' || key === 'fi' || key === 'ct' || key === 'st' || key === 'zip' || key === 'country' || key === 'madid') {
                mappedData.match_keys[key] = hashData(key, mappedData.match_keys[key]);
            }
        }
    }

    return mappedData;
}

function overrideDataIfNeeded(data, mappedData) {
    if (data.serverEventDataList) {
        data.serverEventDataList.forEach(d => {
            mappedData[d.name] = d.value;
        });
    }

    if (data.userDataList) {
        data.userDataList.forEach(d => {
            mappedData.match_keys[d.name] = d.value;
        });
    }

    if (data.customDataList) {
        data.customDataList.forEach(d => {
            mappedData.custom_data[d.name] = d.value;
        });
    }

    return mappedData;
}

function cleanupData(mappedData) {
    if (mappedData.match_keys) {
        let userData = {};

        for (let userDataKey in mappedData.match_keys) {
            if (mappedData.match_keys[userDataKey]) {
                userData[userDataKey] = mappedData.match_keys[userDataKey];
            }
        }

        mappedData.match_keys = userData;
    }

    if (mappedData.custom_data) {
        let customData = {};

        for (let customDataKey in mappedData.custom_data) {
            if (mappedData.custom_data[customDataKey] || customDataKey === 'value') {
                customData[customDataKey] = mappedData.custom_data[customDataKey];
            }
        }

        mappedData.custom_data = customData;
    }

    return mappedData;
}

function addEcommerceData(eventData, mappedData) {
    let currencyFromItems = '';
    let valueFromItems = 0;

    if (eventData.items && eventData.items[0]) {
        mappedData.contents = {};
        mappedData.content_type = 'product';
        currencyFromItems = eventData.items[0].currency;

        eventData.items.forEach((d, i) => {
            let content = {};

            if (d.item_id) content.id = d.item_id;
            if (d.quantity) content.quantity = d.quantity;
            if (d.item_brand) content.brand = d.item_brand;
            if (d.item_category) content.category = d.item_category;

            if (d.price) {
                content.price = d.price;
                valueFromItems += d.quantity ? d.quantity * d.price : d.price;
            }

            mappedData.contents[i] = content;
        });
    }

    if (eventData['x-ga-mp1-ev']) mappedData.value = eventData['x-ga-mp1-ev'];
    else if (eventData['x-ga-mp1-tr']) mappedData.value = eventData['x-ga-mp1-tr'];
    else if (eventData.value) mappedData.value = eventData.value;

    if (eventData.currency) mappedData.currency = eventData.currency;
    else if (currencyFromItems) mappedData.currency = currencyFromItems;

    if (eventData.order_id) mappedData.order_id = eventData.order_id;
    else if (eventData.transaction_id) mappedData.order_id = eventData.transaction_id;

    if (mappedData.event_name === 'Purchase') {
        if (!mappedData.currency) {
            mappedData.currency = 'USD';
        }

        if (!mappedData.value) {
            mappedData.value = valueFromItems ? valueFromItems : 0;
        }
    }

    return mappedData;
}

function addUserData(eventData, mappedData) {
    if (eventData.email) mappedData.match_keys.email = eventData.email;
    else if (eventData.match_keys && eventData.match_keys.email_address) mappedData.match_keys.email = eventData.match_keys.email_address;
    else if (eventData.match_keys && eventData.match_keys.email) mappedData.match_keys.email = eventData.match_keys.email;

    if (eventData.phone) mappedData.match_keys.phone = eventData.phone;
    else if (eventData.match_keys && eventData.match_keys.phone_number) mappedData.match_keys.phone = eventData.match_keys.phone_number;

    if (eventData.gender) mappedData.match_keys.gen = eventData.gender;

    if (eventData.doby) mappedData.match_keys.doby = eventData.doby;
    if (eventData.dobm) mappedData.match_keys.dobm = eventData.dobm;
    if (eventData.dobd) mappedData.match_keys.dobd = eventData.dobd;

    if (eventData.lastName) mappedData.match_keys.ln = eventData.lastName;
    else if (eventData.LastName) mappedData.match_keys.ln = eventData.LastName;
    else if (eventData.nameLast) mappedData.match_keys.ln = eventData.nameLast;
    else if (eventData.match_keys && eventData.match_keys.address && eventData.match_keys.address.last_name) mappedData.match_keys.ln = eventData.match_keys.address.last_name;

    if (eventData.firstName) mappedData.match_keys.fn = eventData.firstName;
    else if (eventData.FirstName) mappedData.match_keys.fn = eventData.FirstName;
    else if (eventData.nameFirst) mappedData.match_keys.fn = eventData.nameFirst;
    else if (eventData.match_keys && eventData.match_keys.address && eventData.match_keys.address.first_name) mappedData.match_keys.fn = eventData.match_keys.address.first_name;

    if (eventData.fi) mappedData.match_keys.fi = eventData.fi;

    if (eventData.city) mappedData.match_keys.ct = eventData.city;
    else if (eventData.match_keys && eventData.match_keys.address && eventData.match_keys.address.city) mappedData.match_keys.ct = eventData.match_keys.address.city;

    if (eventData.state) mappedData.match_keys.st = eventData.state;
    else if (eventData.match_keys && eventData.match_keys.address && eventData.match_keys.address.region) mappedData.match_keys.st = eventData.match_keys.address.region;

    if (eventData.zip) mappedData.match_keys.zip = eventData.zip;
    else if (eventData.match_keys && eventData.match_keys.address && eventData.match_keys.address.postal_code) mappedData.match_keys.zip = eventData.match_keys.address.postal_code;

    if (eventData.countryCode) mappedData.match_keys.country = eventData.countryCode;
    else if (eventData.country) mappedData.match_keys.country = eventData.country;
    else if (eventData.match_keys && eventData.match_keys.address && eventData.match_keys.address.country) mappedData.match_keys.country = eventData.match_keys.address.country;

    if (eventData.madid) mappedData.match_keys.madid = eventData.madid;

    if (eventData.external_id) mappedData.match_keys.external_id = eventData.external_id;
    else if (eventData.user_id) mappedData.match_keys.external_id = eventData.user_id;
    else if (eventData.userId) mappedData.match_keys.external_id = eventData.userId;

    if (eventData.lead_id) mappedData.match_keys.lead_id = eventData.lead_id;
    else if (eventData.leadId) mappedData.match_keys.lead_id = eventData.leadId;

    return mappedData;
}

function determinateIsLoggingEnabled() {
    const containerVersion = getContainerVersion();
    const isDebug = !!(
        containerVersion &&
        (containerVersion.debugMode || containerVersion.previewMode)
    );

    if (!data.logType) {
        return isDebug;
    }

    if (data.logType === 'no') {
        return false;
    }

    if (data.logType === 'debug') {
        return isDebug;
    }

    return data.logType === 'always';
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "headerWhitelist",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "trace-id"
                  }
                ]
              }
            ]
          }
        },
        {
          "key": "headersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://graph.facebook.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 12/08/2022, 09:31:00


